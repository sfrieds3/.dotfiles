---
- name: Install nvm
  command:
    command -v nvm 2>&1 && wget -qO- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.1/install.sh | bash

- name: Install npm packages
  npm:
    name: "{{ item }}"
    global: yes
  loop: "{{ npm_packages }}"
  loop_control:
    label: "{{ item }}"

- name: Install rbenv
  command:
    cmd: git clone https://github.com/rbenv/rbenv.git ~/.rbenv
    creates: $HOME/.rbenv

- name: Create rbenv plugins dir
  command:
    cmd: mkdir -p "$(rbenv root)"/plugins
    creates: $(rbenv root)/plugins

- name: Install ruby-build
  command:
    cmd: git clone https://github.com/rbenv/ruby-build.git "$(rbenv root)"/plugins/ruby-build
    creates: $(rbenv root)/plugins
